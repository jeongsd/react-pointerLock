<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>React-pointerlock by jeongsd</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">React-pointerlock</h1>
      <h2 class="project-tagline">pointLock api for react.js</h2>
      <a href="https://github.com/jeongsd/react-pointerlock" class="btn">View on GitHub</a>
      <a href="https://github.com/jeongsd/react-pointerlock/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jeongsd/react-pointerlock/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="reactpointlock" class="anchor" href="#reactpointlock" aria-hidden="true"><span class="octicon octicon-link"></span></a>reactPointLock</h1>

<p><a href="https://www.npmjs.com/package/react-pointerlock"><img src="https://img.shields.io/npm/dt/react-pointerlock.svg" alt="npm download"></a>
<a href="https://www.npmjs.com/package/react-pointerlock"><img src="https://img.shields.io/npm/v/react-pointerlock.svg" alt="npm version"></a>
<a href="https://travis-ci.org/jeongsd/react-pointerlock"><img src="https://img.shields.io/travis/jeongsd/react-pointerlock.svg" alt="Build Status"></a>
<a href="./LICENSE"><img src="https://img.shields.io/npm/l/react-pointerlock.svg" alt="Licenese"></a></p>

<p>The <strong>Pointer Lock API</strong> (formerly called Mouse Lock API) provides input methods based on the movement of the mouse over time (i.e., deltas), not just the absolute position of the mouse cursor in the viewport. It gives you access to raw mouse movement, locks the target of mouse events to a single element, eliminates limits on how far mouse movement can go in a single direction, and removes the cursor from view. It is ideal for first person 3D games, for example.</p>

<p>example code using <a href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_Lock_API">MDN Pointer Lock API</a></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>installation</h2>

<p><code>npm install reactPointLock</code></p>

<h2>
<a id="component-api" class="anchor" href="#component-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Component API</h2>

<p><strong>onMouseMove(movement, event)</strong></p>

<ul>
<li>movement.x : movement x point</li>
<li>movement.y : movement y point</li>
<li>event : mousemove event</li>
</ul>

<h2>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example</h2>

<div class="highlight highlight-source-js"><pre><span class="pl-k">import</span> <span class="pl-smi">React</span>, { <span class="pl-smi">Component</span> } <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>react<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span> <span class="pl-smi">ReactDOM</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>react-dom<span class="pl-pds">'</span></span>;
<span class="pl-k">import</span> <span class="pl-smi">PointerLock</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>react-pointerlock<span class="pl-pds">'</span></span>;

<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">'</span>./app.css<span class="pl-pds">'</span></span>;

<span class="pl-k">class</span> <span class="pl-en">App</span> <span class="pl-k">extends</span> <span class="pl-en">Component</span> {

  <span class="pl-en">constructor</span>() {
    <span class="pl-v">super</span>();

    <span class="pl-smi">this</span>.<span class="pl-smi">state</span> <span class="pl-k">=</span> { x<span class="pl-k">:</span> <span class="pl-c1">50</span>, y<span class="pl-k">:</span> <span class="pl-c1">50</span> };

    <span class="pl-smi">this</span>.<span class="pl-smi">onMouseMove</span> <span class="pl-k">=</span> <span class="pl-smi">this</span>.<span class="pl-smi">onMouseMove</span>.<span class="pl-en">bind</span>(<span class="pl-v">this</span>);
  }

  <span class="pl-en">componentDidMount</span>() {
    <span class="pl-smi">this</span>.<span class="pl-en">canvasDraw</span>();
  }

  <span class="pl-en">componentDidUpdate</span>() {
    <span class="pl-smi">this</span>.<span class="pl-en">canvasDraw</span>();
  }

  <span class="pl-en">onMouseMove</span>(<span class="pl-smi">movement</span>) {
    <span class="pl-k">const</span> <span class="pl-c1">canvas</span> <span class="pl-k">=</span> <span class="pl-smi">ReactDOM</span>.<span class="pl-en">findDOMNode</span>(<span class="pl-smi">this</span>.<span class="pl-smi">refs</span>.<span class="pl-smi">canvas</span>);
    <span class="pl-k">let</span> x <span class="pl-k">=</span> <span class="pl-smi">this</span>.<span class="pl-smi">state</span>.<span class="pl-c1">x</span> <span class="pl-k">+</span> <span class="pl-smi">movement</span>.<span class="pl-c1">x</span>;
    <span class="pl-k">let</span> y <span class="pl-k">=</span> <span class="pl-smi">this</span>.<span class="pl-smi">state</span>.<span class="pl-c1">y</span> <span class="pl-k">+</span> <span class="pl-smi">movement</span>.<span class="pl-c1">y</span>;

    <span class="pl-k">if</span> (x <span class="pl-k">&gt;</span> <span class="pl-smi">canvas</span>.<span class="pl-smi">clientWidth</span> <span class="pl-k">+</span> <span class="pl-c1">20</span>) {
      x <span class="pl-k">=</span> <span class="pl-c1">0</span>;
    }

    <span class="pl-k">if</span> (y <span class="pl-k">&gt;</span> <span class="pl-smi">canvas</span>.<span class="pl-smi">clientHeight</span> <span class="pl-k">+</span> <span class="pl-c1">20</span>) {
      y <span class="pl-k">=</span> <span class="pl-c1">0</span>;
    }

    <span class="pl-k">if</span> (x <span class="pl-k">&lt;</span> <span class="pl-k">-</span><span class="pl-c1">15</span>) {
      x <span class="pl-k">=</span> <span class="pl-smi">canvas</span>.<span class="pl-smi">clientWidth</span>;
    }

    <span class="pl-k">if</span> (y <span class="pl-k">&lt;</span> <span class="pl-k">-</span><span class="pl-c1">15</span>) {
      y <span class="pl-k">=</span> <span class="pl-smi">canvas</span>.<span class="pl-smi">clientHeight</span>;
    }

    <span class="pl-smi">this</span>.<span class="pl-en">setState</span>({ x<span class="pl-k">:</span> x, y<span class="pl-k">:</span> y });
  }

  <span class="pl-en">canvasDraw</span>() {
    <span class="pl-k">const</span> <span class="pl-c1">canvas</span> <span class="pl-k">=</span> <span class="pl-smi">ReactDOM</span>.<span class="pl-en">findDOMNode</span>(<span class="pl-smi">this</span>.<span class="pl-smi">refs</span>.<span class="pl-smi">canvas</span>);
    <span class="pl-k">const</span> <span class="pl-c1">context</span> <span class="pl-k">=</span> <span class="pl-smi">canvas</span>.<span class="pl-en">getContext</span>(<span class="pl-s"><span class="pl-pds">'</span>2d<span class="pl-pds">'</span></span>);

    <span class="pl-smi">context</span>.<span class="pl-smi">fillStyle</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>black<span class="pl-pds">'</span></span>;
    <span class="pl-smi">context</span>.<span class="pl-en">fillRect</span>(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>, <span class="pl-smi">canvas</span>.<span class="pl-smi">clientWidth</span>, <span class="pl-smi">canvas</span>.<span class="pl-smi">clientHeight</span>);

    <span class="pl-smi">context</span>.<span class="pl-smi">fillStyle</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>#F9F903<span class="pl-pds">'</span></span>;
    <span class="pl-smi">context</span>.<span class="pl-en">beginPath</span>();
    <span class="pl-smi">context</span>.<span class="pl-en">arc</span>(<span class="pl-smi">this</span>.<span class="pl-smi">state</span>.<span class="pl-c1">x</span>, <span class="pl-smi">this</span>.<span class="pl-smi">state</span>.<span class="pl-c1">y</span>, <span class="pl-c1">20</span>, <span class="pl-c1">0</span>, <span class="pl-smi">Math</span>.<span class="pl-c1">PI</span> <span class="pl-k">*</span> <span class="pl-c1">2</span>, <span class="pl-c1">true</span>);
    <span class="pl-smi">context</span>.<span class="pl-en">fill</span>();
  }

  <span class="pl-en">render</span>() {
    <span class="pl-k">return</span> (
      <span class="pl-k">&lt;</span>div className<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>app<span class="pl-pds">"</span></span><span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span>h1<span class="pl-k">&gt;</span>Pointer lock demo<span class="pl-k">&lt;</span><span class="pl-k">/</span>h1<span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span>p<span class="pl-k">&gt;</span>This demo demonstrates usage <span class="pl-k">of</span> the pointer lock <span class="pl-smi">API</span>. <span class="pl-c1">C</span>lick on the canvas area and your mouse will directly control the ball inside the canvas, not your mouse <span class="pl-smi">pointer</span>. <span class="pl-c1">Y</span>ou can press escape to <span class="pl-k">return</span> to the standard expected state.<span class="pl-k">&lt;</span><span class="pl-k">/</span>p<span class="pl-k">&gt;</span>

      <span class="pl-k">&lt;</span>h2<span class="pl-k">&gt;</span>X Position<span class="pl-k">:</span> { <span class="pl-smi">this</span>.<span class="pl-smi">state</span>.<span class="pl-c1">x</span> }<span class="pl-k">&lt;</span><span class="pl-k">/</span>h2<span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span>h2<span class="pl-k">&gt;</span>Y Position<span class="pl-k">:</span> { <span class="pl-smi">this</span>.<span class="pl-smi">state</span>.<span class="pl-c1">y</span> }<span class="pl-k">&lt;</span><span class="pl-k">/</span>h2<span class="pl-k">&gt;</span>

      <span class="pl-k">&lt;</span>PointerLock
        onMouseMove<span class="pl-k">=</span>{ <span class="pl-smi">this</span>.<span class="pl-smi">onMouseMove</span> } <span class="pl-k">&gt;</span>
        <span class="pl-k">&lt;</span>canvas
          width<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>640px<span class="pl-pds">"</span></span>
          height<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>369px<span class="pl-pds">"</span></span>
          ref<span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>canvas<span class="pl-pds">"</span></span><span class="pl-k">/</span><span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span><span class="pl-k">/</span>PointerLock<span class="pl-k">&gt;</span>
      <span class="pl-k">&lt;</span><span class="pl-k">/</span>div<span class="pl-k">&gt;</span>
    );
  }

}

<span class="pl-smi">ReactDOM</span>.<span class="pl-en">render</span>(
  <span class="pl-k">&lt;</span>App <span class="pl-k">/</span><span class="pl-k">&gt;</span>,
  <span class="pl-smi">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">'</span>app<span class="pl-pds">'</span></span>)
);</pre></div>

<h2>
<a id="contribute" class="anchor" href="#contribute" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contribute</h2>

<div class="highlight highlight-source-shell"><pre>npm install
npm start</pre></div>

<div class="highlight highlight-source-shell"><pre>npm build</pre></div>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<ul>
<li>test</li>
<li>css build using babel.js</li>
<li>minifly</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jeongsd/react-pointerlock">React-pointerlock</a> is maintained by <a href="https://github.com/jeongsd">jeongsd</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
